---
import Footer from '@/components/Footer.astro';
import Header from '@/components/Header.astro';
import HeaderMini from '@/components/HeaderMini.astro';
import Seo from '@/components/Seo.astro';
import Sidebar from '@/components/ui/Sidebar/Sidebar.astro';
import { ViewTransitions } from 'astro:transitions';
interface Props {
	title: string;
	description: string;
	image?: string;
	canonical?: string;
	showHero?: boolean;

}

const { title, description, image, canonical, showHero } = Astro.props;

---

<!doctype html>
<html lang="es">
<head>
	<Seo
		title={title}
		description={description}
		image={image}
		canonical={canonical}
	/>
	<ViewTransitions />
</head>
<body class="lg:overflow-x-hidden h-full">
	<Sidebar/>
	<div id="content" class="relative w-full h-full bg-[#f2f2f2] z-20 transition-transform duration-500 will-change-transform">
		{showHero ? <Header transition:persist/> : <HeaderMini transition:persist/>}
		<slot />
		<Footer/>
	</div>
</body>
</html>
<style is:global>
	html {
		font-family: 'Onest Variable', sans-serif;
		background: #f2f2f2;
	}
	main {
		background: #f2f2f2;
	}
	body {
		margin: 0;
		padding: 0;
	}
	#sidebar-backdrop {
		@apply fixed top-0 left-0 right-0 w-full h-screen bottom-0 z-[21];
		opacity: 0;
		display: none;
		will-change: opacity;
		transition: opacity 0.5s ease;
	}
	#sidebar-backdrop.active {
		opacity: 1;
		display: block;
	}

	@media (max-width: 991px) {
    body, html {
        overflow: auto;
    }
		
	}
</style>

<script>
	document.addEventListener('astro:page-load', async () => {
		const content = document.querySelector("#content") as HTMLElement;
		const sidebarBackdrop = document.querySelector("#sidebar-backdrop") as HTMLElement;

		const toggleSidebar = () => {
			sidebarBackdrop.classList.toggle("active");
			sidebarBackdrop.classList.toggle("translate-x-64");
			content.classList.toggle("translate-x-64");

		};
		const menu = document.querySelector("#menu") as HTMLElement;
		menu.addEventListener("click", toggleSidebar);
	});
</script>